<div class="navbar-inner">
    <div class="container-fluid">
        <a class="brand" href="dashboard.html">&nbsp;</a>
        <div class="nav-collapse">
            <ul class="nav pull-right">
                <li id="fat-menu" class="dropdown action-menu">
                    <!--
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Actions <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><h2>Your Projects</h2></li>
                    <li><a href="#">Project 1</a></li>
                    <li><a href="#">Project 2</a></li>
                    <li class="divider"></li>
                    <li><a class="action-button" href="#">New project</a></li>
                    <li><a class="action-button" href="#">Action 2 </a></li>
                    <li><a class="action-button" href="#">Action 3</a></li>
                    </ul> -->
                </li>
                
                <li>
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span id="user-app-login">John</span>&nbsp;&nbsp;<b class="caret"></b></a>

                    <ul class="dropdown-menu">
                        <li id="profile"></li>
                        <li><a id="btn-logout" href="#">Logout</a></li>
                        <li class="divider"></li>
                    </ul>
                </li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</div>

<script type="text/javascript">
    $(function() {

        //get cookie name
        var name = $.getDisplayNameFromCookie();
        if (name!=''){
            $('span#user-app-login').html(name);
        }

        var login = $.getLoginFromCookie();
        if (login!=''){
            $.ajax({
                url: 'http://'+config.hostname+':'+config.port+'/'+config.rootPath+'/'+config.resources.members+'/login/'+login,
                type:'GET',
                contentType:'application/json; charset=UTF-8',
                success: function(reponse) 
                {
                    response = $.parseJSON(reponse);
                    console.log("reponse"+response);
                    $('#profile').html('<a href="member.html?member='+response+'">Profile</a>');
                },
                error:function (xhr, status, error)
                {
                    bootbox.alert('Erreur : '+xhr.responseText+' ('+status+' - '+error+')');
                },
                dataType:'text',
                converters:'text json'
            });
        }

        //function called by $.getObjFromDatabase function (utils.js)
    
       

        //logout
        $("#btn-logout").live('click', function(e){
            $.logout();
        });

    });
</script>